<form [formGroup]="profileForm" class="profile">
  <div class="profile__information">
    <div class="information__main flex justify-content-between">
      <div>
        <h2>{{ getFullName(accountProfile?.firstname, accountProfile?.lastname) }}</h2>
        <h3>{{ accountProfile?.role.name }}</h3>
      </div>
      <div class="avatar-information">
        <div class="avatar-content">
          <img src="{{imagePreview ? imagePreview : './assets/images/no-avt-pic.jpg'}}"
               alt="Ảnh đại diện">
        </div>
        <div (click)="openFileDialog(fileInput)" class="avatar-action" [pTooltip]="'Cập nhật ảnh đại diện'"
             tooltipPosition="left">
          <i class="pi pi-pencil"></i>
        </div>
      </div>
    </div>
    <div class="information__others grid row-gap-3 mt-3">
      <div class="col-6">
        <label class="information__label">Di động:</label>
        <span class="information__value">{{ accountProfile?.perPhone }}</span>
      </div>
      <div class="col-6">
        <label class="information__label">Email:</label>
        <span class="information__value">{{ accountProfile?.email }}</span>
      </div>
      <!--      <div class="col-6">-->
      <!--        <label class="information__label">Di động công ty:</label>-->
      <!--        <span class="information__value">{{ accountProfile?.compPhone }}</span>-->
      <!--      </div>-->
      <div class="col-6">
        <label class="information__label">Địa điểm làm việc:</label>
        <span class="information__value">{{ accountProfile?.workingPlace }}
                </span>
      </div>
      <div class="col-6">
        <label class="information__label">Vai trò tài khoản:</label>
        <span class="information__value">{{ accountProfile?.role.name }}</span>

      </div>
    </div>

  </div>
  <div class="profile__configuration mt-4">
    <p-tabView>
      <p-tabPanel header="Bảo mật tài khoản">
        <div class="configuration__block">
          <div class="title">
            <h3>QUẢN LÝ MẬT KHẨU</h3>
            <p-divider/>
            <p-button (onClick)="handleClickChangePassword()" label="Thay đổi mật khẩu"
                      styleClass="p-button-secondary"></p-button>
          </div>
        </div>
      </p-tabPanel>
      <p-tabPanel header="Thông tin công việc">
        <div class="configuration__block">
          <h3>THÔNG TIN CÔNG VIỆC</h3>
          <p-divider/>
          <div class="grid">
            <!--            <div class="col-12 flex align-items-center">-->
            <!--              <label class="information__label">Bộ phận:</label>-->
            <!--              <p-dropdown [readonly]="true" [filter]="true" filterBy="name"-->
            <!--                          [showClear]="true" class="flex-1" optionLabel="name"-->
            <!--                          [options]="departments"-->
            <!--                          placeholder="Chọn bộ phận"></p-dropdown>-->
            <!--            </div>-->
            <div class="col-12 flex align-items-center">
              <label class="information__label">Địa chỉ làm việc:</label>
              <p-dropdown [readonly]="true" filterBy="address"
                          class="flex-1" optionLabel="address"
                          [options]="workingPlaces"
                          formControlName="workingPlace"
                          placeholder="Chọn nơi làm việc"></p-dropdown>
            </div>
          </div>
        </div>
        <div class="mt-4"></div>
      </p-tabPanel>
      <p-tabPanel header="Thông tin riêng tư">
        <div class="grid personal-information">
          <div class="configuration__block col-6 flex flex-column row-gap-2">
            <h3>THÔNG TIN LIÊN HỆ <br>
              <p-divider/>
            </h3>

            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Địa chỉ cá nhân</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="perAddress1" type="text" pInputText placeholder="Đường 1"/>
                <input formControlName="perAddress2" type="text" pInputText placeholder="Đường 2"/>
              </div>
            </div>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Email</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="email" [readonly]="true" type="text" pInputText placeholder="user@example.com"/>
              </div>
            </div>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Điện thoại</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="perPhone" type="text" pInputText placeholder="Số điện thoại"/>
              </div>
            </div>
          </div>
          <div class="configuration__block col-6 flex flex-column row-gap-2">
            <h3>CÔNG DÂN <br>
              <p-divider/>
            </h3>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Số CMND</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="citizenID" [disabled]="true" [readonly]="true" type="text" pInputText
                       placeholder=""/>
              </div>
            </div>
            <!--            <div class="block__detail flex justify-content-between align-items-center">-->
            <!--              <div class="block__title">-->
            <!--                <b>Số an sinh xã hội</b>-->
            <!--              </div>-->
            <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
            <!--                <input type="text" pInputText placeholder=""/>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--            <div class="block__detail flex justify-content-between align-items-center">-->
            <!--              <div class="block__title">-->
            <!--                <b>Số hộ chiếu</b>-->
            <!--              </div>-->
            <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
            <!--                <input type="text" pInputText placeholder=""/>-->
            <!--              </div>-->
            <!--            </div>-->
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Giới tính</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <p-dropdown [readonly]="true" class="flex-1" optionLabel="label"
                            [options]="genderOptions"
                            formControlName="gender"
                            placeholder="Chọn giới tính"></p-dropdown>
              </div>
            </div>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Ngày sinh</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <p-calendar formControlName="dob" [disabled]="false" [showOnFocus]="false" [readonlyInput]="true"/>
              </div>
            </div>
            <!--            <div class="block__detail flex justify-content-between align-items-center">-->
            <!--              <div class="block__title">-->
            <!--                <b>Nơi sinh</b>-->
            <!--              </div>-->
            <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
            <!--                <input type="text" pInputText placeholder=""/>-->
            <!--              </div>-->
            <!--            </div>-->
          </div>
          <!--          <div class="configuration__block col-6 flex flex-column row-gap-2">-->
          <!--            <h3>GIÁO DỤC<br>-->
          <!--              <p-divider/>-->
          <!--            </h3>-->
          <!--            <div class="block__detail flex justify-content-between align-items-center">-->
          <!--              <div class="block__title">-->
          <!--                <b>Trình độ</b>-->
          <!--              </div>-->
          <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
          <!--                <input type="text" pInputText placeholder=""/>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--            <div class="block__detail flex justify-content-between align-items-center">-->
          <!--              <div class="block__title">-->
          <!--                <b>Chuyên ngành</b>-->
          <!--              </div>-->
          <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
          <!--                <input type="text" pInputText placeholder=""/>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--            <div class="block__detail flex justify-content-between align-items-center">-->
          <!--              <div class="block__title">-->
          <!--                <b>Trường</b>-->
          <!--              </div>-->
          <!--              <div class="block__info flex-1 flex flex-column row-gap-2">-->
          <!--                <input type="text" pInputText placeholder=""/>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--          </div>-->
          <div class="configuration__block col-6 flex flex-column row-gap-2">
            <h3>LIÊN HỆ KHẨN CẤP<br>
              <p-divider/>
            </h3>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Tên liên hệ</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="emergencyContactName" type="text" pInputText placeholder="Tên người liên hệ"/>
              </div>
            </div>
            <div class="block__detail flex justify-content-between align-items-center">
              <div class="block__title">
                <b>Số điện thoại</b>
              </div>
              <div class="block__info flex-1 flex flex-column row-gap-2">
                <input formControlName="emergencyPhoneNumber" type="text" pInputText placeholder="Số điện thoại"/>
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
    </p-tabView>
  </div>
  <div class="actions flex flex-row-reverse column-gap-3">
    <div class="action-item">
      <p-button (click)="onClickUpdate()" styleClass="p-button-primary" label="Lưu"></p-button>
    </div>
    <div class="action-item">
      <p-button styleClass="p-button-secondary" label="Trở về" (click)="handleClickingBack()"></p-button>
    </div>
  </div>
  <app-change-password-dialog [visible]="changePasswordVisible"
                              (onClose)="handleChangePasswordClose($event)"></app-change-password-dialog>
  <input type="file" #fileInput (change)="onFileSelected($event)" style="display: none;" accept="image/*"/>
</form>
